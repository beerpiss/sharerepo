async function main(){var e=new URLSearchParams(window.location.search),t=e.get("repo"),a=e.get("pkgman");null===t?(usage=document.getElementById("usage-template").content.cloneNode(!0),usage.querySelector("h1").innerText=`Usage: ${window.location.href}?repo=YOUR_REPO_URL\n\n        All URL parameters:\n        - repo: the repo you want to add\n        - pkgman (optional): the package manager to add to (sileo, zebra, cydia, installer, saily)`,usageElem=document.getElementById("usage"),usageElem.appendChild(usage),usageElem.removeAttribute("hidden")):isRepositoryDefault(t)?(usage=document.getElementById("usage-template").content.cloneNode(!0),usage.querySelector("h1").innerText=`Cannot add default repo: ${t}`,usageElem=document.getElementById("usage"),usageElem.appendChild(usage),usageElem.removeAttribute("hidden")):drawPage(t,a)}async function isRepositoryPiracy(e){return piracyList=await fetch("https://raw.githubusercontent.com/cnstr/manifests/gh-pages/piracy-repositories.json").then(e=>e.json()),piracyList.includes(new URL(e).hostname)}async function getRepositoryName(e){return await fetch(`https://api.canister.me/v1/community/repositories/search?query=${e}`).then(e=>e.json()).then(t=>0!==t.data.length?t.data[0].name:e)}function isRepositoryDefault(e){e=e.replace(/\/$/,"");var t=new URL(e);return["apt.bingner.com/","apt.elucubratus.com/","apt.procurs.us/","ftp.sudhip.com/procursus","repo.quiprr.dev/procursus","apt.saurik.com/","apt.oldcurs.us/","repo.chimera.sh/","diatr.us/apt","repo.theodyssey.dev/"].includes(t.hostname+t.pathname)}async function drawPage(e,t){var a={cydia:`https://cydia.saurik.com/api/share#?source=${e}`,sileo:`sileo://source/${e}`,zebra:`zbra://${e}`,installer:`installer://add/${e}`,saily:`apt-repo://${e}`},n=document.getElementById("group1-template").content.cloneNode(!0);if(n.querySelector("#repo-url").innerText=e,await isRepositoryPiracy(e))warningIconElem=document.createElement("i"),warningIconElem.className="fa fa-exclamation-triangle",warningIconElem.setAttribute("aria-hidden",!0),warningIconElem.setAttribute("style","text-align: center; color: var(--nord13); font-size:75px; margin-top: 30px; margin-left: auto; margin-right: auto; display: block;"),n.querySelector("#piracy-warning").removeAttribute("hidden"),n.insertBefore(warningIconElem,n.querySelector("#repo-url")),document.getElementById("repo-btns").remove();else{null!==t&&(window.location.href=a[t.toLowerCase()]);var r=new Image;r.setAttribute("hidden",""),r.loading="eager",r.id="logo-main",r.onload=(()=>{image=document.getElementById("logo-main"),image.complete&&image.naturalHeight>0&&(image.removeAttribute("hidden"),image.className="logo-main")}),r.src=`${e.replace(/\/$/,"")}/CydiaIcon.png`,n.insertBefore(r,n.querySelector("#repo-url"));var o=document.getElementById("repo-btns-template").content.cloneNode(!0);for(var i in a)o.querySelector(`#${i}`).href=a[i];document.getElementById("repo-btns").appendChild(o)}document.getElementById("group1").appendChild(n)}main();