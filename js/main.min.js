async function main(){var e=new URLSearchParams(window.location.search),a=e.get("repo"),t=e.get("pkgman");null===a?drawUsage(`Usage: ${window.location.href}?repo=YOUR_REPO_URL\n\n        All URL parameters:\n        - repo: the repo you want to add\n        - pkgman (optional): the package manager to add to (sileo, zebra, cydia, installer, saily)`):isRepositoryDefault(a)?drawUsage(`Cannot add default repo: ${a}`):drawPage(a,t)}async function isRepositoryPiracy(e){return isPiracy=await fetch(`https://api.canister.me/v1/community/repositories/check?query=${e}`).then(e=>e.json()).then(e=>e.data.status),"unsafe"==isPiracy}async function getRepositoryName(e){return await fetch(`https://api.canister.me/v1/community/repositories/search?query=${e}`).then(e=>e.json()).then(a=>0!==a.data.length?a.data[0].name:e)}function isRepositoryDefault(e){e=e.replace(/\/$/,"");var a=new URL(e);return["apt.bingner.com/","apt.elucubratus.com/","apt.procurs.us/","ftp.sudhip.com/procursus","repo.quiprr.dev/procursus","apt.saurik.com/","apt.oldcurs.us/","repo.chimera.sh/","diatr.us/apt","repo.theodyssey.dev/"].includes(a.hostname+a.pathname)}async function drawUsage(e){usage=document.getElementById("usage-template").content.cloneNode(!0),usage.querySelector("h1").innerText=e,usageElem=document.getElementById("usage"),usageElem.appendChild(usage),usageElem.removeAttribute("hidden")}async function drawPage(e,a){var t={cydia:`https://cydia.saurik.com/api/share#?source=${e}`,sileo:`sileo://source/${e}`,zebra:`zbra://${e}`,installer:`installer://add/${e}`,saily:`apt-repo://${e}`},n=document.getElementById("group1-template").content.cloneNode(!0);if(repoURLNamePromise=getRepositoryName(e),await isRepositoryPiracy(e))warningIconElem=document.createElement("i"),warningIconElem.className="fa fa-exclamation-triangle",warningIconElem.setAttribute("aria-hidden",!0),warningIconElem.setAttribute("style","text-align: center; color: var(--nord13); font-size:75px; margin-top: 30px; margin-left: auto; margin-right: auto; display: block;"),n.querySelector("#piracy-warning").removeAttribute("hidden"),n.insertBefore(warningIconElem,n.querySelector("#repo-url")),document.getElementById("repo-btns").remove();else{null!==a&&(window.location.href=t[a.toLowerCase()]);var r=new Image;r.setAttribute("hidden",""),r.loading="eager",r.id="logo-main",r.onload=(()=>{image=document.getElementById("logo-main"),image.complete&&image.naturalHeight>0&&(image.removeAttribute("hidden"),image.className="icon logo-main")}),r.onerror=(()=>{image=document.getElementById("logo-main"),image.src="icons/sad-iphone.png"}),r.src=`${e.replace(/\/$/,"")}/CydiaIcon.png`,n.insertBefore(r,n.querySelector("#repo-url"));var o=document.getElementById("repo-btns-template").content.cloneNode(!0);for(var i in t)o.querySelector(`#${i}`).href=t[i];document.getElementById("repo-btns").appendChild(o)}n.querySelector("#repo-url").innerText=await Promise.resolve(repoURLNamePromise),document.getElementById("group1").appendChild(n)}main();